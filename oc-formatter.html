<script src="../bignumber.js/bignumber.min.js"></script>
<script src="../moment/min/moment.min.js"></script>

<script>
	/*
 * Ordercloud API Mixin that allows communicating with API.
 * @polymer
 * @mixinFunction
 */
	Ordercloud = window.Ordercloud || {};
	Ordercloud.Formatter = Polymer.dedupingMixin((superclass) =>

		/*
             * @polymer
             * @mixinClass
             */
		class OCFormatter extends superclass {
			constructor() {
				super();
			}

			ready() {
				super.ready();
			}

			formatNumber(number) {
				if (isNaN(number)) {
					return new BigNumber(0);
				}

				return new BigNumber(number || 0);
			}

			// Format South African Mobile Number
			formatMobileNumber(number) {
				const numbers = number.replace(/\D/g, ''),
					char = {0: '(+', 2: ') ', 4: ' ', 7: ' '};
				number = '';
				for (let i = 0; i < numbers.length; i++) {
					number += (char[i] || '') + numbers[i];
				}

				return number;
			}

			formatMoneyAmount(amount) {
				return `R ${this.formatNumber(amount).toFixed(2)}`;
			}

			formatDate(date, parseFormat, format) {
				var parsedDate = this.formatMoment(date, parseFormat);
				return parsedDate.format(format || 'DD MMM @ HH:ss');
			}

			formatMoment(date, format) {
				if (date instanceof Date) {
					return moment(date);
				}
				return moment(date, format || 'DD MMM YYYY HH:ss');
			}

			newMoment() {
				return moment();
			}
		}
	);

</script>
